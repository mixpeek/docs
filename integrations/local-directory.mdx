---
title: "Local Directory"
description: "Integrate securely with your local directory of files."
---

<Warning>Note: This page is still in progress.</Warning>

[Github Project](https://github.com/mixpeek/mixpeek-tools/tree/master/directory-crawler)

``` python
import os
import glob
from config import *

class Files:
    def __init__(self, file_directory_path):
        self.dir_path = file_directory_path

    def get_all_files(self):
        """Lorem ipsum
        :param str var_name: lorem
        """
        files_with_tags = []
        #
        for file_path in glob.iglob(f'{self.dir_path}/**/*', recursive=True):
            tags_object = self.extract_tags(os.path.abspath(file_path))
            files_with_tags.append({"tags":tags_object, "file_path":file_path})

        return files_with_tags

    def extract_tags(self, file_path):
        """Lorem ipsum
        :param str var_name: lorem
        """
        # remove full directory path
        path = file_path.replace(self.dir_path, '')
        # split by /
        tokens = path.split('/')
        # remove empty str (first)
        del tokens[0]
        # file path tokenized & filename
        obj = {
            "tags": tokens[0:-1],
            "filename": tokens[-1]
        }
        return obj


class S3:
    def __init__(self, bucket_name):
        """s3 boto3 client instantiation
        """
        self.client = boto3.client(
            's3',
            aws_access_key_id=aws_access_key_id,
            aws_secret_access_key=aws_secret_access_key,
            region_name=region_name
        )
        self.bucket_name=bucket_name

    def upload_object(self, file_path):
        """Download to S3 object
        :param str var_name: lorem
        """
        # https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/s3.html#S3.Client.download_fileobj
        with open(s3_file_name, 'wb') as file:
            self.client.download_fileobj(
                self.bucket_name,
                s3_file_name,
                file
            )

    def push_tags(self, file_path, tags):
        """Append supplied tags to S3 object
        :param str file_path: lorem
        :param object tags: lorem
        """
        # https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/s3.html#S3.Client.put_object_tagging
        response = self.client.put_object_tagging(
            Bucket='string',
            Key='string',
            Tagging={
                'TagSet': [
                    {
                        'Key': 'string',
                        'Value': 'string'
                    },
                ]
            },
            ExpectedBucketOwner='string',
            RequestPayer='requester'
        )



if __name__ == '__main__':
    # globals()[sys.argv[1]]()
    files = Files(
        file_directory_path="/Users/ethan/Downloads/SiteSucker"
    )
    # s3_client = S3()
    for files_with_tags in files.get_all_files():
        print(files_with_tags)```
