<svg viewBox="0 0 1200 520" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <linearGradient id="objectGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#f97316;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#ea580c;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="rayGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#6366f1;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#4f46e5;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="modelGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#8b5cf6;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#7c3aed;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="featureGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#14b8a6;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#0d9488;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="audioGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#f59e0b;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#d97706;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="visualGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#3b82f6;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#2563eb;stop-opacity:1" />
    </linearGradient>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="0" dy="4" stdDeviation="6" flood-opacity="0.15"/>
    </filter>
    <marker id="arrowGray" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#94a3b8"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="1200" height="520" fill="#f8fafc"/>

  <!-- Title -->
  <text x="600" y="30" font-family="system-ui, -apple-system, sans-serif" font-size="18" font-weight="600" fill="#0f172a" text-anchor="middle">Multimodal Extractor: Unified Video, Image, Text &amp; GIF Processing</text>
  <text x="600" y="50" font-family="system-ui, sans-serif" font-size="11" fill="#64748b" text-anchor="middle">Google Vertex AI multimodal embeddings (1408D) with transcription, OCR, descriptions, and thumbnails</text>

  <!-- Input Types -->
  <g filter="url(#shadow)">
    <rect x="30" y="75" width="130" height="180" rx="10" fill="white" stroke="#e2e8f0" stroke-width="2"/>
    <rect x="30" y="75" width="130" height="28" rx="10" fill="url(#objectGrad)"/>
    <rect x="30" y="93" width="130" height="10" fill="url(#objectGrad)"/>
    <text x="95" y="95" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="white" text-anchor="middle">Inputs</text>
  </g>
  <g transform="translate(40, 115)">
    <rect x="0" y="0" width="110" height="28" rx="4" fill="#fff7ed"/>
    <text x="12" y="18" font-family="system-ui, sans-serif" font-size="10" fill="#c2410c">üé¨</text>
    <text x="30" y="18" font-family="monospace" font-size="9" fill="#475569">video</text>

    <rect x="0" y="34" width="110" height="28" rx="4" fill="#fff7ed"/>
    <text x="12" y="52" font-family="system-ui, sans-serif" font-size="10" fill="#c2410c">üñº</text>
    <text x="30" y="52" font-family="monospace" font-size="9" fill="#475569">image</text>

    <rect x="0" y="68" width="110" height="28" rx="4" fill="#fff7ed"/>
    <text x="12" y="86" font-family="system-ui, sans-serif" font-size="10" fill="#c2410c">üìù</text>
    <text x="30" y="86" font-family="monospace" font-size="9" fill="#475569">text</text>

    <rect x="0" y="102" width="110" height="28" rx="4" fill="#fff7ed"/>
    <text x="12" y="120" font-family="system-ui, sans-serif" font-size="10" fill="#c2410c">üéû</text>
    <text x="30" y="120" font-family="monospace" font-size="9" fill="#475569">gif</text>
  </g>

  <!-- Arrow to Split -->
  <path d="M 160 165 L 195 165" stroke="#94a3b8" stroke-width="2" fill="none" marker-end="url(#arrowGray)"/>

  <!-- Split Methods -->
  <g filter="url(#shadow)">
    <rect x="205" y="75" width="160" height="180" rx="10" fill="white" stroke="#e2e8f0" stroke-width="2"/>
    <rect x="205" y="75" width="160" height="28" rx="10" fill="url(#rayGrad)"/>
    <rect x="205" y="93" width="160" height="10" fill="url(#rayGrad)"/>
    <text x="285" y="95" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="white" text-anchor="middle">Split Method</text>
  </g>
  <g transform="translate(215, 115)">
    <text x="70" y="12" font-family="system-ui, sans-serif" font-size="9" font-weight="600" fill="#475569" text-anchor="middle">split_method:</text>

    <rect x="0" y="20" width="140" height="32" rx="4" fill="#eef2ff"/>
    <text x="70" y="34" font-family="monospace" font-size="9" fill="#4338ca" text-anchor="middle">time</text>
    <text x="70" y="46" font-family="monospace" font-size="7" fill="#64748b" text-anchor="middle">Fixed intervals (10s default)</text>

    <rect x="0" y="58" width="140" height="32" rx="4" fill="#eef2ff"/>
    <text x="70" y="72" font-family="monospace" font-size="9" fill="#4338ca" text-anchor="middle">scene</text>
    <text x="70" y="84" font-family="monospace" font-size="7" fill="#64748b" text-anchor="middle">Visual changes (threshold 0.5)</text>

    <rect x="0" y="96" width="140" height="32" rx="4" fill="#eef2ff"/>
    <text x="70" y="110" font-family="monospace" font-size="9" fill="#4338ca" text-anchor="middle">silence</text>
    <text x="70" y="122" font-family="monospace" font-size="7" fill="#64748b" text-anchor="middle">Audio pauses (-40dB)</text>
  </g>

  <!-- Arrow to Parallel Processing -->
  <path d="M 365 165 L 400 165" stroke="#94a3b8" stroke-width="2" fill="none" marker-end="url(#arrowGray)"/>

  <!-- Parallel Processing Box -->
  <g filter="url(#shadow)">
    <rect x="410" y="65" width="480" height="200" rx="12" fill="#f1f5f9" stroke="#cbd5e1" stroke-width="1" stroke-dasharray="4,2"/>
  </g>
  <text x="650" y="82" font-family="system-ui, sans-serif" font-size="10" font-weight="600" fill="#64748b" text-anchor="middle">Parallel Processing Branches</text>

  <!-- Audio Branch: Whisper + E5 -->
  <g filter="url(#shadow)">
    <rect x="425" y="95" width="220" height="155" rx="8" fill="white" stroke="#e2e8f0" stroke-width="2"/>
    <rect x="425" y="95" width="220" height="24" rx="8" fill="url(#audioGrad)"/>
    <rect x="425" y="111" width="220" height="8" fill="url(#audioGrad)"/>
    <text x="535" y="111" font-family="system-ui, sans-serif" font-size="10" font-weight="600" fill="white" text-anchor="middle">Audio Branch</text>
  </g>
  <g transform="translate(435, 128)">
    <rect x="0" y="0" width="95" height="55" rx="4" fill="#fef3c7"/>
    <text x="47" y="16" font-family="system-ui, sans-serif" font-size="9" font-weight="600" fill="#92400e" text-anchor="middle">Whisper</text>
    <text x="47" y="30" font-family="monospace" font-size="7" fill="#475569" text-anchor="middle">large-v3-turbo</text>
    <text x="47" y="44" font-family="system-ui, sans-serif" font-size="7" fill="#64748b" text-anchor="middle">Audio ‚Üí Text</text>

    <path d="M 95 28 L 105 28" stroke="#94a3b8" stroke-width="1.5" fill="none" marker-end="url(#arrowGray)"/>

    <rect x="105" y="0" width="95" height="55" rx="4" fill="#f3e8ff"/>
    <text x="152" y="16" font-family="system-ui, sans-serif" font-size="9" font-weight="600" fill="#7c3aed" text-anchor="middle">E5-Large</text>
    <text x="152" y="30" font-family="monospace" font-size="7" fill="#475569" text-anchor="middle">1024D</text>
    <text x="152" y="44" font-family="system-ui, sans-serif" font-size="7" fill="#64748b" text-anchor="middle">Text ‚Üí Vector</text>

    <rect x="0" y="65" width="200" height="50" rx="4" fill="#f0fdfa"/>
    <text x="100" y="80" font-family="system-ui, sans-serif" font-size="8" font-weight="500" fill="#0d9488" text-anchor="middle">Outputs:</text>
    <text x="100" y="94" font-family="monospace" font-size="7" fill="#475569" text-anchor="middle">transcription + transcription_embedding</text>
    <text x="100" y="106" font-family="monospace" font-size="7" fill="#64748b" text-anchor="middle">run_transcription: true (default)</text>
  </g>

  <!-- Visual Branch: Vertex AI -->
  <g filter="url(#shadow)">
    <rect x="655" y="95" width="220" height="155" rx="8" fill="white" stroke="#e2e8f0" stroke-width="2"/>
    <rect x="655" y="95" width="220" height="24" rx="8" fill="url(#visualGrad)"/>
    <rect x="655" y="111" width="220" height="8" fill="url(#visualGrad)"/>
    <text x="765" y="111" font-family="system-ui, sans-serif" font-size="10" font-weight="600" fill="white" text-anchor="middle">Visual Branch</text>
  </g>
  <g transform="translate(665, 128)">
    <rect x="0" y="0" width="200" height="55" rx="4" fill="#dbeafe"/>
    <text x="100" y="16" font-family="system-ui, sans-serif" font-size="9" font-weight="600" fill="#1d4ed8" text-anchor="middle">Vertex AI Multimodal</text>
    <text x="100" y="32" font-family="monospace" font-size="7" fill="#475569" text-anchor="middle">Google Cloud Embeddings</text>
    <text x="100" y="46" font-family="system-ui, sans-serif" font-size="7" fill="#64748b" text-anchor="middle">Video/Image/Text/GIF ‚Üí 1408D</text>

    <rect x="0" y="65" width="200" height="50" rx="4" fill="#f0fdfa"/>
    <text x="100" y="80" font-family="system-ui, sans-serif" font-size="8" font-weight="500" fill="#0d9488" text-anchor="middle">Outputs:</text>
    <text x="100" y="94" font-family="monospace" font-size="7" fill="#475569" text-anchor="middle">multimodal_embedding [1408D]</text>
    <text x="100" y="106" font-family="monospace" font-size="7" fill="#64748b" text-anchor="middle">run_multimodal_embedding: true</text>
  </g>

  <!-- Arrow to Optional Features -->
  <path d="M 890 165 L 925 165" stroke="#94a3b8" stroke-width="2" fill="none" marker-end="url(#arrowGray)"/>

  <!-- Optional Features -->
  <g filter="url(#shadow)">
    <rect x="935" y="75" width="130" height="180" rx="10" fill="white" stroke="#e2e8f0" stroke-width="2"/>
    <rect x="935" y="75" width="130" height="28" rx="10" fill="#1e293b"/>
    <rect x="935" y="93" width="130" height="10" fill="#1e293b"/>
    <text x="1000" y="95" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="white" text-anchor="middle">Optional</text>
  </g>
  <g transform="translate(945, 115)">
    <rect x="0" y="0" width="110" height="32" rx="4" fill="#374151"/>
    <text x="55" y="14" font-family="system-ui, sans-serif" font-size="9" fill="#22d3ee" text-anchor="middle">Thumbnails</text>
    <text x="55" y="26" font-family="monospace" font-size="7" fill="#94a3b8" text-anchor="middle">enable_thumbnails</text>

    <rect x="0" y="38" width="110" height="32" rx="4" fill="#374151"/>
    <text x="55" y="52" font-family="system-ui, sans-serif" font-size="9" fill="#22d3ee" text-anchor="middle">OCR</text>
    <text x="55" y="64" font-family="monospace" font-size="7" fill="#94a3b8" text-anchor="middle">run_ocr: false</text>

    <rect x="0" y="76" width="110" height="32" rx="4" fill="#374151"/>
    <text x="55" y="90" font-family="system-ui, sans-serif" font-size="9" fill="#22d3ee" text-anchor="middle">Descriptions</text>
    <text x="55" y="102" font-family="monospace" font-size="7" fill="#94a3b8" text-anchor="middle">run_video_desc</text>

    <rect x="0" y="114" width="110" height="32" rx="4" fill="#374151"/>
    <text x="55" y="128" font-family="system-ui, sans-serif" font-size="9" fill="#f472b6" text-anchor="middle">response_shape</text>
    <text x="55" y="140" font-family="monospace" font-size="7" fill="#94a3b8" text-anchor="middle">LLM extraction</text>
  </g>

  <!-- Output Section -->
  <text x="600" y="290" font-family="system-ui, sans-serif" font-size="12" font-weight="600" fill="#475569" text-anchor="middle">Output Document (per segment)</text>

  <g filter="url(#shadow)">
    <rect x="100" y="305" width="1000" height="130" rx="10" fill="white" stroke="#e2e8f0" stroke-width="2"/>
    <rect x="100" y="305" width="1000" height="28" rx="10" fill="url(#featureGrad)"/>
    <rect x="100" y="323" width="1000" height="10" fill="url(#featureGrad)"/>
    <text x="600" y="325" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="white" text-anchor="middle">MultimodalExtractorOutput</text>
  </g>
  <g transform="translate(115, 345)">
    <!-- Row 1 -->
    <rect x="0" y="0" width="140" height="35" rx="4" fill="#f0fdfa"/>
    <text x="70" y="14" font-family="system-ui, sans-serif" font-size="8" font-weight="500" fill="#0d9488" text-anchor="middle">Timing</text>
    <text x="70" y="28" font-family="monospace" font-size="7" fill="#475569" text-anchor="middle">start_time, end_time</text>

    <rect x="150" y="0" width="180" height="35" rx="4" fill="#ccfbf1"/>
    <text x="240" y="14" font-family="system-ui, sans-serif" font-size="8" font-weight="500" fill="#0d9488" text-anchor="middle">Multimodal Embedding</text>
    <text x="240" y="28" font-family="monospace" font-size="7" fill="#475569" text-anchor="middle">multimodal_extractor_v1_..._embedding [1408D]</text>

    <rect x="340" y="0" width="180" height="35" rx="4" fill="#ccfbf1"/>
    <text x="430" y="14" font-family="system-ui, sans-serif" font-size="8" font-weight="500" fill="#0d9488" text-anchor="middle">Transcription Embedding</text>
    <text x="430" y="28" font-family="monospace" font-size="7" fill="#475569" text-anchor="middle">multimodal_extractor_v1_..._embedding [1024D]</text>

    <rect x="530" y="0" width="140" height="35" rx="4" fill="#f0fdfa"/>
    <text x="600" y="14" font-family="system-ui, sans-serif" font-size="8" font-weight="500" fill="#0d9488" text-anchor="middle">Transcription</text>
    <text x="600" y="28" font-family="monospace" font-size="7" fill="#475569" text-anchor="middle">transcription: string</text>

    <rect x="680" y="0" width="140" height="35" rx="4" fill="#f0fdfa"/>
    <text x="750" y="14" font-family="system-ui, sans-serif" font-size="8" font-weight="500" fill="#0d9488" text-anchor="middle">Description</text>
    <text x="750" y="28" font-family="monospace" font-size="7" fill="#475569" text-anchor="middle">description: string</text>

    <rect x="830" y="0" width="140" height="35" rx="4" fill="#f0fdfa"/>
    <text x="900" y="14" font-family="system-ui, sans-serif" font-size="8" font-weight="500" fill="#0d9488" text-anchor="middle">OCR + Thumbnails</text>
    <text x="900" y="28" font-family="monospace" font-size="7" fill="#475569" text-anchor="middle">ocr_text, thumbnail_url</text>

    <!-- Row 2: URIs -->
    <rect x="0" y="45" width="970" height="35" rx="4" fill="#f1f5f9"/>
    <text x="485" y="60" font-family="system-ui, sans-serif" font-size="8" font-weight="500" fill="#475569" text-anchor="middle">Feature URIs: mixpeek://multimodal_extractor@v1/multimodal_embedding | mixpeek://multimodal_extractor@v1/transcription_embedding</text>
    <text x="485" y="74" font-family="monospace" font-size="7" fill="#64748b" text-anchor="middle">source_video_url | video_segment_url | internal_metadata (lineage)</text>
  </g>

  <!-- Performance Info -->
  <g transform="translate(100, 450)">
    <rect x="0" y="0" width="320" height="55" rx="6" fill="#fef3c7"/>
    <text x="160" y="18" font-family="system-ui, sans-serif" font-size="10" font-weight="600" fill="#92400e" text-anchor="middle">Performance</text>
    <text x="160" y="34" font-family="system-ui, sans-serif" font-size="9" fill="#475569" text-anchor="middle">Videos: 0.5-2x realtime | Images: &lt;1s | Text: &lt;100ms</text>
    <text x="160" y="48" font-family="system-ui, sans-serif" font-size="9" fill="#475569" text-anchor="middle">GPU workers: 5-10x faster throughput</text>

    <rect x="340" y="0" width="320" height="55" rx="6" fill="#dbeafe"/>
    <text x="500" y="18" font-family="system-ui, sans-serif" font-size="10" font-weight="600" fill="#1d4ed8" text-anchor="middle">Cost Estimates (per minute of video)</text>
    <text x="500" y="34" font-family="system-ui, sans-serif" font-size="9" fill="#475569" text-anchor="middle">Minimal (transcription + embeddings): $0.01</text>
    <text x="500" y="48" font-family="system-ui, sans-serif" font-size="9" fill="#475569" text-anchor="middle">Standard (+OCR): $0.05 | Full (+descriptions): $0.15</text>

    <rect x="680" y="0" width="320" height="55" rx="6" fill="#f0fdfa"/>
    <text x="840" y="18" font-family="system-ui, sans-serif" font-size="10" font-weight="600" fill="#0d9488" text-anchor="middle">Use Cases</text>
    <text x="840" y="34" font-family="system-ui, sans-serif" font-size="9" fill="#475569" text-anchor="middle">Video search, media platforms, surveillance</text>
    <text x="840" y="48" font-family="system-ui, sans-serif" font-size="9" fill="#475569" text-anchor="middle">Cross-modal search (text ‚Üí video/image)</text>
  </g>
</svg>
