<svg viewBox="0 0 1200 520" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <linearGradient id="inputGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#f97316;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#ea580c;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="diarizeGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#6366f1;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#4f46e5;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="textBranchGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#f59e0b;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#d97706;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="prosodicGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#3b82f6;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#2563eb;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="featureGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#14b8a6;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#0d9488;stop-opacity:1" />
    </linearGradient>
    
    <marker id="arrowGray" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#94a3b8"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="1200" height="520" fill="none"/>

  <!-- Title -->
  <text x="600" y="30" font-family="system-ui, -apple-system, sans-serif" font-size="18" font-weight="600" fill="#f1f5f9" text-anchor="middle">Audio Sentiment Extractor: Financial Earnings Call Intelligence Pipeline</text>
  <text x="600" y="50" font-family="system-ui, sans-serif" font-size="11" fill="#94a3b8" text-anchor="middle">FinBERT text sentiment + prosodic audio features + speaker diarization for quantitative alternative data</text>

  <!-- Input Types -->
  <g>
    <rect x="30" y="75" width="130" height="180" rx="10" fill="white" stroke="#334155" stroke-width="2"/>
    <rect x="30" y="75" width="130" height="28" rx="10" fill="url(#inputGrad)"/>
    <rect x="30" y="93" width="130" height="10" fill="url(#inputGrad)"/>
    <text x="95" y="95" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="white" text-anchor="middle">Inputs</text>
  </g>
  <g transform="translate(40, 115)">
    <rect x="0" y="0" width="110" height="28" rx="4" fill="#fff7ed"/>
    <text x="12" y="18" font-family="system-ui, sans-serif" font-size="10" fill="#c2410c">&#127897;</text>
    <text x="30" y="18" font-family="monospace" font-size="9" fill="#475569">audio (MP3/WAV)</text>

    <rect x="0" y="34" width="110" height="28" rx="4" fill="#fff7ed"/>
    <text x="12" y="52" font-family="system-ui, sans-serif" font-size="10" fill="#c2410c">&#127916;</text>
    <text x="30" y="52" font-family="monospace" font-size="9" fill="#475569">video (MP4/MOV)</text>

    <rect x="0" y="68" width="110" height="28" rx="4" fill="#fff7ed"/>
    <text x="12" y="86" font-family="system-ui, sans-serif" font-size="10" fill="#c2410c">&#128279;</text>
    <text x="30" y="86" font-family="monospace" font-size="9" fill="#475569">url (webcast)</text>

    <rect x="0" y="102" width="110" height="28" rx="4" fill="#fff7ed"/>
    <text x="12" y="120" font-family="system-ui, sans-serif" font-size="10" fill="#c2410c">&#128202;</text>
    <text x="30" y="120" font-family="monospace" font-size="9" fill="#475569">earnings call</text>
  </g>

  <!-- Arrow to Audio Prep -->
  <path d="M 160 165 L 195 165" stroke="#94a3b8" stroke-width="2" fill="none" marker-end="url(#arrowGray)"/>

  <!-- Audio Prep and Diarization -->
  <g>
    <rect x="205" y="75" width="160" height="180" rx="10" fill="white" stroke="#334155" stroke-width="2"/>
    <rect x="205" y="75" width="160" height="28" rx="10" fill="url(#diarizeGrad)"/>
    <rect x="205" y="93" width="160" height="10" fill="url(#diarizeGrad)"/>
    <text x="285" y="95" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="white" text-anchor="middle">Audio Prep</text>
  </g>
  <g transform="translate(215, 115)">
    <text x="70" y="12" font-family="system-ui, sans-serif" font-size="9" font-weight="600" fill="#475569" text-anchor="middle">split_method:</text>

    <rect x="0" y="20" width="140" height="32" rx="4" fill="#eef2ff"/>
    <text x="70" y="34" font-family="monospace" font-size="9" fill="#4338ca" text-anchor="middle">time</text>
    <text x="70" y="46" font-family="monospace" font-size="7" fill="#94a3b8" text-anchor="middle">Fixed intervals (30s default)</text>

    <rect x="0" y="58" width="140" height="32" rx="4" fill="#eef2ff"/>
    <text x="70" y="72" font-family="monospace" font-size="9" fill="#4338ca" text-anchor="middle">silence</text>
    <text x="70" y="84" font-family="monospace" font-size="7" fill="#94a3b8" text-anchor="middle">Natural speech pauses</text>

    <rect x="0" y="96" width="140" height="32" rx="4" fill="#eef2ff"/>
    <text x="70" y="110" font-family="monospace" font-size="9" fill="#4338ca" text-anchor="middle">speaker</text>
    <text x="70" y="122" font-family="monospace" font-size="7" fill="#94a3b8" text-anchor="middle">Diarization segments</text>
  </g>

  <!-- Arrow to Parallel Processing -->
  <path d="M 365 165 L 400 165" stroke="#94a3b8" stroke-width="2" fill="none" marker-end="url(#arrowGray)"/>

  <!-- Parallel Processing Box -->
  <g>
    <rect x="410" y="65" width="480" height="200" rx="12" fill="#f1f5f9" stroke="#cbd5e1" stroke-width="1" stroke-dasharray="4,2"/>
  </g>
  <text x="650" y="82" font-family="system-ui, sans-serif" font-size="10" font-weight="600" fill="#94a3b8" text-anchor="middle">Parallel Extraction Branches</text>

  <!-- Text Intelligence Branch -->
  <g>
    <rect x="425" y="95" width="220" height="155" rx="8" fill="white" stroke="#334155" stroke-width="2"/>
    <rect x="425" y="95" width="220" height="24" rx="8" fill="url(#textBranchGrad)"/>
    <rect x="425" y="111" width="220" height="8" fill="url(#textBranchGrad)"/>
    <text x="535" y="111" font-family="system-ui, sans-serif" font-size="10" font-weight="600" fill="white" text-anchor="middle">Text Intelligence Branch</text>
  </g>
  <g transform="translate(435, 128)">
    <rect x="0" y="0" width="92" height="55" rx="4" fill="#fef3c7"/>
    <text x="46" y="16" font-family="system-ui, sans-serif" font-size="9" font-weight="600" fill="#92400e" text-anchor="middle">Whisper</text>
    <text x="46" y="30" font-family="monospace" font-size="7" fill="#475569" text-anchor="middle">large-v3-turbo</text>
    <text x="46" y="44" font-family="system-ui, sans-serif" font-size="7" fill="#94a3b8" text-anchor="middle">Audio &#8594; Text</text>

    <path d="M 92 28 L 102 28" stroke="#94a3b8" stroke-width="1.5" fill="none" marker-end="url(#arrowGray)"/>

    <rect x="102" y="0" width="95" height="55" rx="4" fill="#fef9c3"/>
    <text x="150" y="16" font-family="system-ui, sans-serif" font-size="9" font-weight="600" fill="#854d0e" text-anchor="middle">FinBERT</text>
    <text x="150" y="30" font-family="monospace" font-size="7" fill="#475569" text-anchor="middle">768D fin. NLP</text>
    <text x="150" y="44" font-family="system-ui, sans-serif" font-size="7" fill="#94a3b8" text-anchor="middle">Fin. Sentiment</text>

    <rect x="0" y="65" width="200" height="50" rx="4" fill="#f0fdfa"/>
    <text x="100" y="80" font-family="system-ui, sans-serif" font-size="8" font-weight="500" fill="#0d9488" text-anchor="middle">Outputs:</text>
    <text x="100" y="94" font-family="monospace" font-size="7" fill="#475569" text-anchor="middle">transcription + sentiment_score</text>
    <text x="100" y="106" font-family="monospace" font-size="7" fill="#94a3b8" text-anchor="middle">text_embedding [768D]</text>
  </g>

  <!-- Prosodic Branch -->
  <g>
    <rect x="655" y="95" width="220" height="155" rx="8" fill="white" stroke="#334155" stroke-width="2"/>
    <rect x="655" y="95" width="220" height="24" rx="8" fill="url(#prosodicGrad)"/>
    <rect x="655" y="111" width="220" height="8" fill="url(#prosodicGrad)"/>
    <text x="765" y="111" font-family="system-ui, sans-serif" font-size="10" font-weight="600" fill="white" text-anchor="middle">Prosodic Features Branch</text>
  </g>
  <g transform="translate(665, 128)">
    <rect x="0" y="0" width="200" height="55" rx="4" fill="#dbeafe"/>
    <text x="100" y="14" font-family="system-ui, sans-serif" font-size="9" font-weight="600" fill="#1d4ed8" text-anchor="middle">LibROSA + Parselmouth</text>
    <text x="100" y="28" font-family="monospace" font-size="7" fill="#475569" text-anchor="middle">pitch &#183; rate &#183; energy &#183; pauses &#183; tremor</text>
    <text x="100" y="42" font-family="system-ui, sans-serif" font-size="7" fill="#94a3b8" text-anchor="middle">5 vocal stress indicators &#8594; 128D vector</text>

    <rect x="0" y="65" width="200" height="50" rx="4" fill="#f0fdfa"/>
    <text x="100" y="80" font-family="system-ui, sans-serif" font-size="8" font-weight="500" fill="#0d9488" text-anchor="middle">Outputs:</text>
    <text x="100" y="94" font-family="monospace" font-size="7" fill="#475569" text-anchor="middle">prosodic_embedding [128D]</text>
    <text x="100" y="106" font-family="monospace" font-size="7" fill="#94a3b8" text-anchor="middle">pitch_hz &#183; speech_rate_wpm &#183; pause_ratio</text>
  </g>

  <!-- Arrow to Optional Features -->
  <path d="M 890 165 L 925 165" stroke="#94a3b8" stroke-width="2" fill="none" marker-end="url(#arrowGray)"/>

  <!-- Optional Features -->
  <g>
    <rect x="935" y="75" width="130" height="180" rx="10" fill="white" stroke="#334155" stroke-width="2"/>
    <rect x="935" y="75" width="130" height="28" rx="10" fill="#1e293b"/>
    <rect x="935" y="93" width="130" height="10" fill="#1e293b"/>
    <text x="1000" y="95" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="white" text-anchor="middle">Optional</text>
  </g>
  <g transform="translate(945, 115)">
    <rect x="0" y="0" width="110" height="32" rx="4" fill="#374151"/>
    <text x="55" y="14" font-family="system-ui, sans-serif" font-size="9" fill="#22d3ee" text-anchor="middle">Speaker Labels</text>
    <text x="55" y="26" font-family="monospace" font-size="7" fill="#94a3b8" text-anchor="middle">run_diarization</text>

    <rect x="0" y="38" width="110" height="32" rx="4" fill="#374151"/>
    <text x="55" y="52" font-family="system-ui, sans-serif" font-size="9" fill="#22d3ee" text-anchor="middle">Alignment Score</text>
    <text x="55" y="64" font-family="monospace" font-size="7" fill="#94a3b8" text-anchor="middle">audio_text_align</text>

    <rect x="0" y="76" width="110" height="32" rx="4" fill="#374151"/>
    <text x="55" y="90" font-family="system-ui, sans-serif" font-size="9" fill="#22d3ee" text-anchor="middle">LLM Enrichment</text>
    <text x="55" y="102" font-family="monospace" font-size="7" fill="#94a3b8" text-anchor="middle">run_llm_enrichment</text>

    <rect x="0" y="114" width="110" height="32" rx="4" fill="#374151"/>
    <text x="55" y="128" font-family="system-ui, sans-serif" font-size="9" fill="#f472b6" text-anchor="middle">response_shape</text>
    <text x="55" y="140" font-family="monospace" font-size="7" fill="#94a3b8" text-anchor="middle">Alpha signals</text>
  </g>

  <!-- Output Section -->
  <text x="600" y="290" font-family="system-ui, sans-serif" font-size="12" font-weight="600" fill="#475569" text-anchor="middle">Output Document (per segment)</text>

  <g>
    <rect x="100" y="305" width="1000" height="130" rx="10" fill="white" stroke="#334155" stroke-width="2"/>
    <rect x="100" y="305" width="1000" height="28" rx="10" fill="url(#featureGrad)"/>
    <rect x="100" y="323" width="1000" height="10" fill="url(#featureGrad)"/>
    <text x="600" y="325" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="white" text-anchor="middle">AudioSentimentExtractorOutput</text>
  </g>
  <g transform="translate(115, 345)">
    <rect x="0" y="0" width="130" height="35" rx="4" fill="#f0fdfa"/>
    <text x="65" y="14" font-family="system-ui, sans-serif" font-size="8" font-weight="500" fill="#0d9488" text-anchor="middle">Timing + Speaker</text>
    <text x="65" y="28" font-family="monospace" font-size="7" fill="#475569" text-anchor="middle">start_time &#183; speaker_id</text>

    <rect x="140" y="0" width="170" height="35" rx="4" fill="#ccfbf1"/>
    <text x="225" y="14" font-family="system-ui, sans-serif" font-size="8" font-weight="500" fill="#0d9488" text-anchor="middle">Text Embedding</text>
    <text x="225" y="28" font-family="monospace" font-size="7" fill="#475569" text-anchor="middle">audio_sentiment_v1_text_emb [768D]</text>

    <rect x="320" y="0" width="175" height="35" rx="4" fill="#ccfbf1"/>
    <text x="407" y="14" font-family="system-ui, sans-serif" font-size="8" font-weight="500" fill="#0d9488" text-anchor="middle">Prosodic Embedding</text>
    <text x="407" y="28" font-family="monospace" font-size="7" fill="#475569" text-anchor="middle">audio_sentiment_v1_prosodic_emb [128D]</text>

    <rect x="505" y="0" width="145" height="35" rx="4" fill="#f0fdfa"/>
    <text x="577" y="14" font-family="system-ui, sans-serif" font-size="8" font-weight="500" fill="#0d9488" text-anchor="middle">Sentiment</text>
    <text x="577" y="28" font-family="monospace" font-size="7" fill="#475569" text-anchor="middle">score &#183; label &#183; confidence</text>

    <rect x="660" y="0" width="145" height="35" rx="4" fill="#f0fdfa"/>
    <text x="732" y="14" font-family="system-ui, sans-serif" font-size="8" font-weight="500" fill="#0d9488" text-anchor="middle">Prosodic Features</text>
    <text x="732" y="28" font-family="monospace" font-size="7" fill="#475569" text-anchor="middle">pitch &#183; rate &#183; energy &#183; pauses</text>

    <rect x="815" y="0" width="155" height="35" rx="4" fill="#f0fdfa"/>
    <text x="892" y="14" font-family="system-ui, sans-serif" font-size="8" font-weight="500" fill="#0d9488" text-anchor="middle">Alpha Signals</text>
    <text x="892" y="28" font-family="monospace" font-size="7" fill="#475569" text-anchor="middle">alignment &#183; stress_index</text>

    <rect x="0" y="45" width="970" height="35" rx="4" fill="#f1f5f9"/>
    <text x="485" y="60" font-family="system-ui, sans-serif" font-size="8" font-weight="500" fill="#475569" text-anchor="middle">Feature URIs: mixpeek://audio_sentiment_extractor@v1/text_embedding | mixpeek://audio_sentiment_extractor@v1/prosodic_embedding</text>
    <text x="485" y="74" font-family="monospace" font-size="7" fill="#94a3b8" text-anchor="middle">transcription | audio_text_alignment | speaker_role | internal_metadata (lineage)</text>
  </g>

  <!-- Performance Info -->
  <g transform="translate(100, 450)">
    <rect x="0" y="0" width="320" height="55" rx="6" fill="#fef3c7"/>
    <text x="160" y="18" font-family="system-ui, sans-serif" font-size="10" font-weight="600" fill="#92400e" text-anchor="middle">Performance</text>
    <text x="160" y="34" font-family="system-ui, sans-serif" font-size="9" fill="#475569" text-anchor="middle">~1.5x realtime | 60-min call: ~40 min</text>
    <text x="160" y="48" font-family="system-ui, sans-serif" font-size="9" fill="#475569" text-anchor="middle">GPU workers: 5x faster throughput</text>

    <rect x="340" y="0" width="320" height="55" rx="6" fill="#dbeafe"/>
    <text x="500" y="18" font-family="system-ui, sans-serif" font-size="10" font-weight="600" fill="#1d4ed8" text-anchor="middle">Cost Estimates (per hour of audio)</text>
    <text x="500" y="34" font-family="system-ui, sans-serif" font-size="9" fill="#475569" text-anchor="middle">Minimal (transcription + FinBERT): $0.08</text>
    <text x="500" y="48" font-family="system-ui, sans-serif" font-size="9" fill="#475569" text-anchor="middle">Full (+ diarization + prosodics): $0.25</text>

    <rect x="680" y="0" width="320" height="55" rx="6" fill="#f0fdfa"/>
    <text x="840" y="18" font-family="system-ui, sans-serif" font-size="10" font-weight="600" fill="#0d9488" text-anchor="middle">Alpha Signals for Quant</text>
    <text x="840" y="34" font-family="system-ui, sans-serif" font-size="9" fill="#475569" text-anchor="middle">CEO vocal stress &#183; Sentiment divergence</text>
    <text x="840" y="48" font-family="system-ui, sans-serif" font-size="9" fill="#475569" text-anchor="middle">Guidance confidence &#183; Audio-text alignment</text>
  </g>
</svg>
