<svg viewBox="0 0 1100 480" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <linearGradient id="objectGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#f97316;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#ea580c;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="modelGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#8b5cf6;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#7c3aed;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="featureGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#14b8a6;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#0d9488;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="layoutGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#3b82f6;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#2563eb;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="vlmGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#f472b6;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#ec4899;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="confidenceGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#eab308;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#ca8a04;stop-opacity:1" />
    </linearGradient>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="0" dy="4" stdDeviation="6" flood-opacity="0.15"/>
    </filter>
    <marker id="arrowGray" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#94a3b8"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="1100" height="480" fill="#f8fafc"/>

  <!-- Title -->
  <text x="550" y="30" font-family="system-ui, -apple-system, sans-serif" font-size="18" font-weight="600" fill="#0f172a" text-anchor="middle">Document Graph Extractor: Spatial Block Extraction</text>
  <text x="550" y="50" font-family="system-ui, sans-serif" font-size="11" fill="#64748b" text-anchor="middle">PDF parsing with layout detection, confidence scoring, and optional VLM correction</text>

  <!-- PDF Input -->
  <g filter="url(#shadow)">
    <rect x="30" y="80" width="160" height="140" rx="10" fill="white" stroke="#e2e8f0" stroke-width="2"/>
    <rect x="30" y="80" width="160" height="28" rx="10" fill="url(#objectGrad)"/>
    <rect x="30" y="98" width="160" height="10" fill="url(#objectGrad)"/>
    <text x="110" y="100" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="white" text-anchor="middle">PDF Input</text>
  </g>
  <g transform="translate(40, 120)">
    <rect x="0" y="0" width="140" height="90" rx="4" fill="#fff7ed"/>
    <text x="70" y="16" font-family="system-ui, sans-serif" font-size="9" font-weight="500" fill="#c2410c" text-anchor="middle">Required</text>
    <text x="70" y="32" font-family="monospace" font-size="8" fill="#475569" text-anchor="middle">"pdf": URL/S3 path</text>
    <text x="70" y="48" font-family="system-ui, sans-serif" font-size="8" fill="#64748b" text-anchor="middle">Scanned or digital</text>
    <text x="70" y="62" font-family="system-ui, sans-serif" font-size="8" fill="#64748b" text-anchor="middle">Any page count</text>
    <text x="70" y="80" font-family="system-ui, sans-serif" font-size="7" fill="#94a3b8" text-anchor="middle">Mixed quality supported</text>
  </g>

  <!-- Arrow to Layout Detection -->
  <path d="M 190 150 L 220 150" stroke="#94a3b8" stroke-width="2" fill="none" marker-end="url(#arrowGray)"/>

  <!-- Layout Detection -->
  <g filter="url(#shadow)">
    <rect x="230" y="70" width="180" height="160" rx="10" fill="white" stroke="#e2e8f0" stroke-width="2"/>
    <rect x="230" y="70" width="180" height="28" rx="10" fill="url(#layoutGrad)"/>
    <rect x="230" y="88" width="180" height="10" fill="url(#layoutGrad)"/>
    <text x="320" y="90" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="white" text-anchor="middle">Layout Detection</text>
  </g>
  <g transform="translate(240, 110)">
    <rect x="0" y="0" width="160" height="110" rx="4" fill="#dbeafe"/>
    <text x="80" y="16" font-family="system-ui, sans-serif" font-size="9" font-weight="600" fill="#2563eb" text-anchor="middle">PaddleOCR</text>
    <text x="80" y="32" font-family="system-ui, sans-serif" font-size="7" fill="#475569" text-anchor="middle">Detects text &amp; images</text>
    <text x="80" y="46" font-family="system-ui, sans-serif" font-size="7" fill="#475569" text-anchor="middle">Spatial clustering</text>

    <rect x="10" y="56" width="140" height="46" rx="3" fill="#bfdbfe"/>
    <text x="80" y="70" font-family="system-ui, sans-serif" font-size="7" fill="#1e40af" text-anchor="middle">Block Types Detected:</text>
    <text x="80" y="82" font-family="monospace" font-size="6" fill="#1e3a8a" text-anchor="middle">paragraph, table, form</text>
    <text x="80" y="94" font-family="monospace" font-size="6" fill="#1e3a8a" text-anchor="middle">header, footer, figure</text>
  </g>

  <!-- Arrow to Confidence Scoring -->
  <path d="M 410 150 L 440 150" stroke="#94a3b8" stroke-width="2" fill="none" marker-end="url(#arrowGray)"/>

  <!-- Confidence Scoring -->
  <g filter="url(#shadow)">
    <rect x="450" y="70" width="180" height="160" rx="10" fill="white" stroke="#e2e8f0" stroke-width="2"/>
    <rect x="450" y="70" width="180" height="28" rx="10" fill="url(#confidenceGrad)"/>
    <rect x="450" y="88" width="180" height="10" fill="url(#confidenceGrad)"/>
    <text x="540" y="90" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="white" text-anchor="middle">Confidence</text>
  </g>
  <g transform="translate(460, 110)">
    <rect x="0" y="0" width="160" height="110" rx="4" fill="#fef9c3"/>
    <text x="80" y="16" font-family="system-ui, sans-serif" font-size="9" font-weight="600" fill="#a16207" text-anchor="middle">A/B/C/D Tags</text>

    <text x="80" y="34" font-family="monospace" font-size="7" fill="#475569" text-anchor="middle">A: ≥0.85 (High)</text>
    <text x="80" y="47" font-family="monospace" font-size="7" fill="#475569" text-anchor="middle">B: ≥0.70 (Medium)</text>
    <text x="80" y="60" font-family="monospace" font-size="7" fill="#475569" text-anchor="middle">C: ≥0.50 (Low)</text>
    <text x="80" y="73" font-family="monospace" font-size="7" fill="#475569" text-anchor="middle">D: &lt;0.50 (VLM needed)</text>

    <text x="80" y="92" font-family="system-ui, sans-serif" font-size="7" fill="#78716c" text-anchor="middle">Scores OCR quality</text>
    <text x="80" y="104" font-family="system-ui, sans-serif" font-size="7" fill="#78716c" text-anchor="middle">artifacts, encoding</text>
  </g>

  <!-- Arrow to VLM (optional path) -->
  <path d="M 540 230 L 540 280 L 680 280" stroke="#ec4899" stroke-width="2" stroke-dasharray="5,5" fill="none" marker-end="url(#arrowGray)"/>
  <text x="600" y="270" font-family="system-ui, sans-serif" font-size="8" fill="#ec4899">Low confidence → VLM</text>

  <!-- VLM Correction (Optional) -->
  <g filter="url(#shadow)">
    <rect x="690" y="250" width="180" height="120" rx="10" fill="white" stroke="#f9a8d4" stroke-width="2" stroke-dasharray="8,4"/>
    <rect x="690" y="250" width="180" height="28" rx="10" fill="url(#vlmGrad)"/>
    <rect x="690" y="268" width="180" height="10" fill="url(#vlmGrad)"/>
    <text x="780" y="270" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="white" text-anchor="middle">VLM Correction</text>
    <text x="780" y="284" font-family="system-ui, sans-serif" font-size="7" fill="#f9a8d4" text-anchor="middle">(Optional)</text>
  </g>
  <g transform="translate(700, 292)">
    <rect x="0" y="0" width="160" height="68" rx="4" fill="#fce7f3"/>
    <text x="80" y="14" font-family="system-ui, sans-serif" font-size="8" font-weight="600" fill="#be185d" text-anchor="middle">Gemini / GPT-4V</text>
    <text x="80" y="28" font-family="monospace" font-size="7" fill="#475569" text-anchor="middle">Vision analysis</text>
    <text x="80" y="42" font-family="system-ui, sans-serif" font-size="7" fill="#475569" text-anchor="middle">Corrects OCR errors</text>
    <text x="80" y="56" font-family="system-ui, sans-serif" font-size="7" fill="#78716c" text-anchor="middle">~1 page/sec</text>
  </g>

  <!-- Main arrow continues to output -->
  <path d="M 630 150 L 900 150" stroke="#94a3b8" stroke-width="2" fill="none" marker-end="url(#arrowGray)"/>
  <!-- VLM arrow merges back -->
  <path d="M 780 250 L 780 200 L 900 200 L 900 150" stroke="#ec4899" stroke-width="2" stroke-dasharray="5,5" fill="none"/>

  <!-- Output -->
  <g filter="url(#shadow)">
    <rect x="910" y="60" width="170" height="180" rx="10" fill="white" stroke="#e2e8f0" stroke-width="2"/>
    <rect x="910" y="60" width="170" height="28" rx="10" fill="url(#featureGrad)"/>
    <rect x="910" y="78" width="170" height="10" fill="url(#featureGrad)"/>
    <text x="995" y="80" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="white" text-anchor="middle">Output Blocks</text>
  </g>
  <g transform="translate(920, 100)">
    <rect x="0" y="0" width="150" height="28" rx="4" fill="#ccfbf1"/>
    <text x="75" y="12" font-family="monospace" font-size="7" fill="#0d9488" text-anchor="middle">text, object_type</text>
    <text x="75" y="23" font-family="monospace" font-size="7" fill="#0d9488" text-anchor="middle">confidence_tag</text>

    <rect x="0" y="34" width="150" height="20" rx="4" fill="#f0fdfa"/>
    <text x="75" y="47" font-family="monospace" font-size="7" fill="#0d9488" text-anchor="middle">bbox (x0,y0,x1,y1)</text>

    <rect x="0" y="60" width="150" height="20" rx="4" fill="#f0fdfa"/>
    <text x="75" y="73" font-family="monospace" font-size="7" fill="#0d9488" text-anchor="middle">page_number</text>

    <rect x="0" y="86" width="150" height="20" rx="4" fill="#f0fdfa"/>
    <text x="75" y="99" font-family="monospace" font-size="7" fill="#0d9488" text-anchor="middle">embedding [1024D]</text>

    <rect x="0" y="112" width="150" height="20" rx="4" fill="#f0fdfa"/>
    <text x="75" y="125" font-family="monospace" font-size="7" fill="#0d9488" text-anchor="middle">thumbnail_url</text>
  </g>

  <!-- Speed indicator -->
  <g transform="translate(30, 260)">
    <rect x="0" y="0" width="380" height="90" rx="8" fill="#f1f5f9" stroke="#cbd5e1" stroke-width="1"/>
    <text x="190" y="20" font-family="system-ui, sans-serif" font-size="10" font-weight="600" fill="#334155" text-anchor="middle">Performance Modes</text>

    <rect x="10" y="30" width="110" height="50" rx="4" fill="#dcfce7"/>
    <text x="65" y="44" font-family="system-ui, sans-serif" font-size="8" font-weight="600" fill="#166534" text-anchor="middle">Fast Mode</text>
    <text x="65" y="58" font-family="monospace" font-size="7" fill="#475569" text-anchor="middle">~15 pages/sec</text>
    <text x="65" y="71" font-family="system-ui, sans-serif" font-size="6" fill="#64748b" text-anchor="middle">No VLM correction</text>

    <rect x="135" y="30" width="110" height="50" rx="4" fill="#fef9c3"/>
    <text x="190" y="44" font-family="system-ui, sans-serif" font-size="8" font-weight="600" fill="#854d0e" text-anchor="middle">Standard</text>
    <text x="190" y="58" font-family="monospace" font-size="7" fill="#475569" text-anchor="middle">~5 pages/sec</text>
    <text x="190" y="71" font-family="system-ui, sans-serif" font-size="6" fill="#64748b" text-anchor="middle">Layout detection</text>

    <rect x="260" y="30" width="110" height="50" rx="4" fill="#fce7f3"/>
    <text x="315" y="44" font-family="system-ui, sans-serif" font-size="8" font-weight="600" fill="#9f1239" text-anchor="middle">VLM Enabled</text>
    <text x="315" y="58" font-family="monospace" font-size="7" fill="#475569" text-anchor="middle">~1 page/sec</text>
    <text x="315" y="71" font-family="system-ui, sans-serif" font-size="6" fill="#64748b" text-anchor="middle">Degraded docs</text>
  </g>

  <!-- Use cases -->
  <g transform="translate(450, 260)">
    <rect x="0" y="0" width="630" height="90" rx="8" fill="#fefce8" stroke="#fde047" stroke-width="1"/>
    <text x="315" y="20" font-family="system-ui, sans-serif" font-size="10" font-weight="600" fill="#713f12" text-anchor="middle">Best For</text>

    <g transform="translate(10, 28)">
      <text x="0" y="12" font-family="system-ui, sans-serif" font-size="8" fill="#475569">✓ Historical/archival documents</text>
      <text x="0" y="26" font-family="system-ui, sans-serif" font-size="8" fill="#475569">✓ Scanned PDFs with mixed quality</text>
      <text x="0" y="40" font-family="system-ui, sans-serif" font-size="8" fill="#475569">✓ Forms, tables, multi-column layouts</text>
      <text x="0" y="54" font-family="system-ui, sans-serif" font-size="8" fill="#475569">✓ Block-level granularity with bboxes</text>
    </g>

    <g transform="translate(330, 28)">
      <text x="0" y="12" font-family="system-ui, sans-serif" font-size="8" fill="#dc2626">✗ Simple text-only docs → use text_extractor</text>
      <text x="0" y="26" font-family="system-ui, sans-serif" font-size="8" fill="#dc2626">✗ Real-time requirements → VLM adds latency</text>
      <text x="0" y="40" font-family="system-ui, sans-serif" font-size="8" fill="#64748b">Cost: $0.003-0.05/page (with/without VLM)</text>
    </g>
  </g>

  <!-- Feature URI -->
  <g transform="translate(450, 380)">
    <rect x="0" y="0" width="200" height="70" rx="6" fill="#f0fdfa" stroke="#14b8a6" stroke-width="1"/>
    <text x="100" y="18" font-family="system-ui, sans-serif" font-size="9" font-weight="600" fill="#0d9488" text-anchor="middle">Feature URI</text>
    <text x="100" y="36" font-family="monospace" font-size="7" fill="#475569" text-anchor="middle">mixpeek://document_graph_extractor@v1/</text>
    <text x="100" y="50" font-family="monospace" font-size="7" fill="#475569" text-anchor="middle">text, object_type, confidence_tag,</text>
    <text x="100" y="62" font-family="monospace" font-size="7" fill="#475569" text-anchor="middle">bbox, embedding</text>
  </g>
</svg>
