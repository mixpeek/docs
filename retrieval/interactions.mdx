---
title: "Interactions"
description: "Track and leverage user interactions to improve search relevance"
---

<Note>
  Interaction tracking allows you to record how users engage with search results, enabling personalized ranking, relevance improvement, and usage analytics.
</Note>

## Overview

In Mixpeek, interactions represent how users engage with search results. By tracking these interactions, you can gather valuable data to improve search relevance, personalize results, and gain insights into user behavior and content performance.

<CardGroup cols={2}>
  <Card title="User Engagement Data" icon="hand-pointer">
    Record how users interact with search results, including clicks, views, and conversions
  </Card>
  
  <Card title="Relevance Signals" icon="chart-line">
    Use interaction data as signals to improve search relevance and personalization
  </Card>
</CardGroup>

## Types of Interactions

Mixpeek supports several types of user interactions that you can track:

<AccordionGroup>
  <Accordion title="Click Interactions" icon="hand-pointer">
    Track when users click on or select search results.
    
    **Use cases:**
    - Determine which results users find most relevant
    - Calculate click-through rates (CTR)
    - Build personalized result rankings
  </Accordion>

  <Accordion title="View Interactions" icon="eye">
    Track when users view or engage with content after clicking.
    
    **Use cases:**
    - Measure content engagement depth
    - Identify abandoned content
    - Evaluate post-click relevance
  </Accordion>

  <Accordion title="Conversion Interactions" icon="cart-shopping">
    Track when users take valuable actions like purchases, signups, or downloads.
    
    **Use cases:**
    - Understand which content drives business outcomes
    - Optimize for conversion-driving content
    - Calculate conversion rates by result position
  </Accordion>

  <Accordion title="Custom Interactions" icon="sliders">
    Define and track interactions specific to your application.
    
    **Use cases:**
    - Track domain-specific engagement metrics
    - Collect specialized feedback signals
    - Measure application-specific user behaviors
  </Accordion>
</AccordionGroup>

## Recording Interactions

There is no dedicated public Interactions API in the OpenAPI spec. Track interactions in your application (e.g., analytics or your backend), then use those signals with supported endpoints like Retriever Execute.

### Apply interaction signals at query time

Use exclusion or boosting via filters/sorts when calling Execute Retriever:

```bash
curl -X POST https://api.mixpeek.com/v1/retrievers/RET_ID/execute \
  -H "Authorization: Bearer $API_KEY" \
  -H "X-Namespace: ns_abc123" \
  -H "Content-Type: application/json" \
  -d '{
    "inputs": {"query_text": "wireless headphones"},
    "filters": {
      "AND": [
        {"field": "document_id", "operator": "nin", "value": ["doc_already_clicked_1", "doc_already_clicked_2"]}
      ]
    },
    "limit": 20
  }'
```

### Recommended fields to log in your app

<Tabs>
  <Tab title="Core">
    | Field | Type | Description |
    |-------|------|-------------|
    | `type` | string | Interaction type such as click, view, conversion |
    | `document_id` | string | Document the user interacted with |
    | `user_id` | string | The end-user identifier (pseudonymous recommended) |
  </Tab>
  
  <Tab title="Context">
    | Field | Type | Description |
    |-------|------|-------------|
    | `session_id` | string | Session identifier |
    | `position` | integer | Result position (1-based) |
    | `metadata` | object | App-specific context (query text, device, page) |
  </Tab>
</Tabs>


## Using Interactions in Search

Interactions can be used to personalize and improve search results:

Use interaction history to pre-filter or post-process results on the client or your server. When using the API directly, prefer supported features like filters and sorts.

### User-based filtering example

```bash
curl -X POST https://api.mixpeek.com/v1/retrievers/RET_ID/execute \
  -H "Authorization: Bearer $API_KEY" \
  -H "X-Namespace: ns_abc123" \
  -H "Content-Type: application/json" \
  -d '{
    "inputs": {"query_text": "running shoes"},
    "filters": {
      "AND": [
        {"field": "document_id", "operator": "nin", "value": ["doc_clicked_1", "doc_clicked_2"]}
      ]
    },
    "limit": 20
  }'
```

## Tracking Interactions Client-Side

For web applications, capture interactions in your app and send them to your backend or analytics system. Use those signals to inform subsequent Mixpeek queries.

```javascript
// Add click event listeners to search results
document.querySelectorAll('.search-result').forEach((element, index) => {
  element.addEventListener('click', async () => {
    const documentId = element.getAttribute('data-document-id');
    const payload = {
      type: 'click',
      document_id: documentId,
      position: index + 1,
      user_id: getCurrentUserId(),
      session_id: getSessionId(),
      metadata: {
        query: getCurrentQueryText(),
        device: getDeviceType(),
        page: 'search_results'
      }
    };

    // Send to your backend or analytics
    await fetch('/api/track-interaction', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(payload)
    });
  });
});
```

## Analytics and Reporting

Use your existing analytics stack (e.g., Segment, Snowflake, BigQuery, ClickHouse) to store and analyze interaction events. Mixpeek does not expose analytics endpoints in the OpenAPI spec.

## Best Practices

<Steps>
  <Step title="Track Consistently">
    Implement interaction tracking consistently across your application to collect comprehensive data.
  </Step>
  <Step title="Include Context">
    Capture relevant contextual information in the metadata field to make interactions more valuable for analysis.
  </Step>
  <Step title="Balance Privacy">
    Respect user privacy by anonymizing user identifiers where appropriate and complying with relevant regulations.
  </Step>
  <Step title="Optimize Volume">
    For high-traffic applications, consider batching interaction records or sampling to manage data volume.
  </Step>
</Steps>

<Warning>
  Interaction data can grow rapidly in high-traffic applications. Consider implementing data retention policies and monitoring storage usage.
</Warning>

## Implementation Strategies

<CardGroup cols={2}>
  <Card title="Basic Implementation" icon="baby">
    - Track clicks on search results
    - Use document position data
    - Include user and session IDs
    - Store basic query information
  </Card>
  
  <Card title="Intermediate Implementation" icon="person-walking">
    - Track clicks, views, and conversions
    - Measure view duration and engagement depth
    - Include device and page context
    - Implement client-side tracking with JS SDK
  </Card>

  <Card title="Advanced Implementation" icon="person-running">
    - Track custom interaction types
    - Implement personalized ranking based on history
    - Use interaction data for A/B testing
    - Analyze interaction patterns for recommendations
  </Card>
  
  <Card title="Enterprise Implementation" icon="building">
    - Integrate with data warehouses
    - Implement comprehensive reporting
    - Use interaction data for model training
    - Create personalized content recommendations
  </Card>
</CardGroup>

## API Reference

Relevant endpoints and guides:

- [Execute Retriever](/api-reference/retrievers/execute-retriever)
- [Filters](/retrieval/filters)